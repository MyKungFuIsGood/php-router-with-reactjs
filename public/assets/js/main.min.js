"use strict";var Comment=React.createClass({displayName:"Comment",render:function(){var t=marked(this.props.children.toString(),{sanitize:!0});return React.createElement("div",{className:"comment"},React.createElement("h2",{className:"commentAuthor"},this.props.author),React.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))}}),CommentBox=React.createClass({displayName:"CommentBox",loadCommentsFromServer:function(){$.ajax({url:this.props.url,dataType:"json",cache:!1,success:function(t){this.setState({data:t})}.bind(this),error:function(t,e,a){console.error(this.props.url,e,a.toString())}.bind(this)})},handleCommentSubmit:function(t){var e=this.state.data;e.push(t),this.setState({data:e},function(){$.ajax({url:this.props.url,dataType:"json",type:"POST",data:t,success:function(t){this.setState({data:t})}.bind(this),error:function(t,e,a){console.error(this.props.url,e,a.toString())}.bind(this)})})},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer(),setInterval(this.loadCommentsFromServer,this.props.pollInterval)},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Comments"),React.createElement(CommentList,{data:this.state.data}),React.createElement(CommentForm,{onCommentSubmit:this.handleCommentSubmit}))}}),CommentList=React.createClass({displayName:"CommentList",render:function(){var t=this.props.data.map(function(t,e){return React.createElement(Comment,{author:t.author,key:e},t.text)});return React.createElement("div",{className:"commentList"},t)}}),CommentForm=React.createClass({displayName:"CommentForm",handleSubmit:function(t){t.preventDefault();var e=React.findDOMNode(this.refs.author).value.trim(),a=React.findDOMNode(this.refs.text).value.trim();a&&e&&(this.props.onCommentSubmit({author:e,text:a}),React.findDOMNode(this.refs.author).value="",React.findDOMNode(this.refs.text).value="")},render:function(){return React.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"Your name",ref:"author"}),React.createElement("input",{type:"text",placeholder:"Say something...",ref:"text"}),React.createElement("input",{type:"submit",value:"Post"}))}});React.render(React.createElement(CommentBox,{url:"comments.json",pollInterval:2e3}),document.getElementById("content"));